{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Andr\\xE9/OneDrive - Softwaresul/Documentos/GitHub/Group_Manager/groupManager-chatbot/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Andr\\xE9/OneDrive - Softwaresul/Documentos/GitHub/Group_Manager/groupManager-chatbot/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Andr\\xE9/OneDrive - Softwaresul/Documentos/GitHub/Group_Manager/groupManager-chatbot/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import\"./styles.scss\";import CheckCircle from\"../../assets/svg/checkCircle\";import CustomButton from\"../shared/button\";import{useGroupContext}from\"../../contexts/groupContext\";import Send from\"../../assets/svg/send\";import axios from\"axios\";import QRCode from\"qrcode.react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MainMenu=function MainMenu(_ref){var qrcode=_ref.qrcode;var _useState=useState(5.04),_useState2=_slicedToArray(_useState,2),taxa1=_useState2[0],setTaxa1=_useState2[1];var _useState3=useState(5.12),_useState4=_slicedToArray(_useState3,2),taxa2=_useState4[0],setTaxa2=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),qrCode=_useState6[0],setQrCodeUrl=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),numberOfGroups=_useState8[0],setNumberOfGroups=_useState8[1];var _useGroupContext=useGroupContext(),allGroups=_useGroupContext.allGroups,typeOneGroups=_useGroupContext.typeOneGroups,typeTwoGroups=_useGroupContext.typeTwoGroups,resetGroups=_useGroupContext.resetGroups,updateGroups=_useGroupContext.updateGroups;var handleInputChange=function handleInputChange(event,setValue){setValue(event.target.value);};var sendTaxas=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(taxa,groups){var body,DOMAIN,ENDPOINT,URL,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(groups.length===0)){_context.next=3;break;}alert(\"Nenhum grupo adicionado para envio de taxa correspondente.\");return _context.abrupt(\"return\");case 3:if(!(typeof taxa!==\"number\")){_context.next=6;break;}alert(\"O valor de taxa precisa ser um número válido\");return _context.abrupt(\"return\");case 6:if(!(taxa<=0)){_context.next=9;break;}alert(\"O valor de taxa precisa ser um número maior que 0\");return _context.abrupt(\"return\");case 9:_context.prev=9;body={message:\"A taxa atual \\xE9 de \".concat(taxa),groups:groups};DOMAIN=\"http://localhost:3335/api\";ENDPOINT=\"/groups/send\";URL=\"\".concat(DOMAIN).concat(ENDPOINT);_context.next=16;return axios.post(URL,body);case 16:response=_context.sent;alert(response.data.message);_context.next=23;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](9);console.error(_context.t0);case 23:case\"end\":return _context.stop();}},_callee,null,[[9,20]]);}));return function sendTaxas(_x,_x2){return _ref2.apply(this,arguments);};}();useEffect(function(){if(allGroups&&typeOneGroups&&typeTwoGroups){var groupsLegnth=allGroups.length+typeOneGroups.length+typeTwoGroups.length;setNumberOfGroups(groupsLegnth);}},[allGroups]);return/*#__PURE__*/_jsxs(\"section\",{className:\"mainMenu-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"options-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Taxa de tipo 1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"taxa-form\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"R$\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:taxa1,onChange:function onChange(event){return handleInputChange(event,setTaxa1);}}),/*#__PURE__*/_jsx(\"div\",{className:\"sendMessage-button\",onClick:function onClick(){return sendTaxas(taxa1,typeOneGroups);},children:/*#__PURE__*/_jsx(Send,{width:\"20px\",color:\"#3ad22d\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Taxa de tipo 2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"taxa-form\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"R$\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:taxa2,onChange:function onChange(event){return handleInputChange(event,setTaxa2);}}),/*#__PURE__*/_jsx(\"div\",{className:\"sendMessage-button\",onClick:function onClick(){return sendTaxas(taxa2,typeTwoGroups);},children:/*#__PURE__*/_jsx(Send,{width:\"20px\",color:\"#3ad22d\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"menu-item\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Quantidade de grupos\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[numberOfGroups,\" grupos\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"menu-button\",children:/*#__PURE__*/_jsx(CustomButton,{onClick:resetGroups,children:\"Resetar Grupos\"})})]}),qrcode?/*#__PURE__*/_jsxs(\"div\",{className:\"qrcode-container\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Conecte-se ao seu whatsapp\"}),/*#__PURE__*/_jsx(QRCode,{value:qrcode,size:250})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"qrcode-container\",children:[/*#__PURE__*/_jsx(CheckCircle,{width:\"150px\",color:\"#3AD22D\"}),\"Whatsapp Conectado!\"]})]});};export default MainMenu;","map":{"version":3,"names":["React","useEffect","useState","CheckCircle","CustomButton","useGroupContext","Send","axios","QRCode","jsx","_jsx","jsxs","_jsxs","MainMenu","_ref","qrcode","_useState","_useState2","_slicedToArray","taxa1","setTaxa1","_useState3","_useState4","taxa2","setTaxa2","_useState5","_useState6","qrCode","setQrCodeUrl","_useState7","_useState8","numberOfGroups","setNumberOfGroups","_useGroupContext","allGroups","typeOneGroups","typeTwoGroups","resetGroups","updateGroups","handleInputChange","event","setValue","target","value","sendTaxas","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","taxa","groups","body","DOMAIN","ENDPOINT","URL","response","wrap","_callee$","_context","prev","next","length","alert","abrupt","message","concat","post","sent","data","t0","console","error","stop","_x","_x2","apply","arguments","groupsLegnth","className","children","type","onChange","onClick","width","color","size"],"sources":["C:/Users/André/OneDrive - Softwaresul/Documentos/GitHub/Group_Manager/groupManager-chatbot/frontend/src/components/mainMenu/index.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./styles.scss\";\r\nimport CheckCircle from \"../../assets/svg/checkCircle\";\r\nimport CustomButton from \"../shared/button\";\r\nimport { useGroupContext } from \"../../contexts/groupContext\";\r\nimport Send from \"../../assets/svg/send\";\r\nimport axios from \"axios\";\r\nimport QRCode from \"qrcode.react\";\r\n\r\nconst MainMenu = ({ qrcode }) => {\r\n  const [taxa1, setTaxa1] = useState(5.04);\r\n  const [taxa2, setTaxa2] = useState(5.12);\r\n  const [qrCode, setQrCodeUrl] = useState();\r\n  const [numberOfGroups, setNumberOfGroups] = useState(0);\r\n\r\n  const { allGroups, typeOneGroups, typeTwoGroups, resetGroups, updateGroups } =\r\n    useGroupContext();\r\n\r\n  const handleInputChange = (event, setValue) => {\r\n    setValue(event.target.value);\r\n  };\r\n\r\n  const sendTaxas = async (taxa, groups) => {\r\n    if (groups.length === 0) {\r\n      alert(\"Nenhum grupo adicionado para envio de taxa correspondente.\");\r\n      return;\r\n    }\r\n\r\n    if (typeof taxa !== \"number\") {\r\n      alert(\"O valor de taxa precisa ser um número válido\");\r\n      return;\r\n    }\r\n\r\n    if (taxa <= 0) {\r\n      alert(\"O valor de taxa precisa ser um número maior que 0\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const body = {\r\n        message: `A taxa atual é de ${taxa}`,\r\n        groups: groups,\r\n      };\r\n\r\n      const DOMAIN = \"http://localhost:3335/api\";\r\n      const ENDPOINT = \"/groups/send\";\r\n      const URL = `${DOMAIN}${ENDPOINT}`;\r\n\r\n      const response = await axios.post(URL, body);\r\n\r\n      alert(response.data.message);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (allGroups && typeOneGroups && typeTwoGroups) {\r\n      const groupsLegnth =\r\n        allGroups.length + typeOneGroups.length + typeTwoGroups.length;\r\n      setNumberOfGroups(groupsLegnth);\r\n    }\r\n  }, [allGroups]);\r\n\r\n  return (\r\n    <section className=\"mainMenu-container\">\r\n      <div className=\"options-container\">\r\n        <div className=\"menu-item\">\r\n          <p>Taxa de tipo 1</p>\r\n          <div className=\"taxa-form\">\r\n            <span>R$</span>\r\n            <input\r\n              type=\"number\"\r\n              value={taxa1}\r\n              onChange={(event) => handleInputChange(event, setTaxa1)}\r\n            />\r\n            <div\r\n              className=\"sendMessage-button\"\r\n              onClick={() => sendTaxas(taxa1, typeOneGroups)}\r\n            >\r\n              <Send width=\"20px\" color=\"#3ad22d\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"menu-item\">\r\n          <p>Taxa de tipo 2</p>\r\n          <div className=\"taxa-form\">\r\n            <span>R$</span>\r\n            <input\r\n              type=\"number\"\r\n              value={taxa2}\r\n              onChange={(event) => handleInputChange(event, setTaxa2)}\r\n            />\r\n            <div\r\n              className=\"sendMessage-button\"\r\n              onClick={() => sendTaxas(taxa2, typeTwoGroups)}\r\n            >\r\n              <Send width=\"20px\" color=\"#3ad22d\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"menu-item\">\r\n          <p>Quantidade de grupos</p>\r\n          <div>\r\n            <span>{numberOfGroups} grupos</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"menu-button\">\r\n          <CustomButton onClick={resetGroups}>Resetar Grupos</CustomButton>\r\n        </div>\r\n      </div>\r\n      {qrcode ? (\r\n        <div className=\"qrcode-container\">\r\n          <p>Conecte-se ao seu whatsapp</p>\r\n          <QRCode value={qrcode} size={250} />\r\n        </div>\r\n      ) : (\r\n        <div className=\"qrcode-container\">\r\n          <CheckCircle width=\"150px\" color=\"#3AD22D\" />\r\n          Whatsapp Conectado!\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default MainMenu;\r\n"],"mappings":"okBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,eAAe,CACtB,MAAO,CAAAC,WAAW,KAAM,8BAA8B,CACtD,MAAO,CAAAC,YAAY,KAAM,kBAAkB,CAC3C,OAASC,eAAe,KAAQ,6BAA6B,CAC7D,MAAO,CAAAC,IAAI,KAAM,uBAAuB,CACxC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAElC,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAAC,IAAA,CAAmB,IAAb,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CACxB,IAAAC,SAAA,CAA0Bd,QAAQ,CAAC,IAAI,CAAC,CAAAe,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAA0BnB,QAAQ,CAAC,IAAI,CAAC,CAAAoB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAjCE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAA+BvB,QAAQ,CAAC,CAAC,CAAAwB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAlCE,MAAM,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC3B,IAAAG,UAAA,CAA4C3B,QAAQ,CAAC,CAAC,CAAC,CAAA4B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAhDE,cAAc,CAAAD,UAAA,IAAEE,iBAAiB,CAAAF,UAAA,IAExC,IAAAG,gBAAA,CACE5B,eAAe,CAAC,CAAC,CADX6B,SAAS,CAAAD,gBAAA,CAATC,SAAS,CAAEC,aAAa,CAAAF,gBAAA,CAAbE,aAAa,CAAEC,aAAa,CAAAH,gBAAA,CAAbG,aAAa,CAAEC,WAAW,CAAAJ,gBAAA,CAAXI,WAAW,CAAEC,YAAY,CAAAL,gBAAA,CAAZK,YAAY,CAG1E,GAAM,CAAAC,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAIC,KAAK,CAAEC,QAAQ,CAAK,CAC7CA,QAAQ,CAACD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAC9B,CAAC,CAED,GAAM,CAAAC,SAAS,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,IAAI,CAAEC,MAAM,MAAAC,IAAA,CAAAC,MAAA,CAAAC,QAAA,CAAAC,GAAA,CAAAC,QAAA,QAAAT,mBAAA,GAAAU,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,cAC/BV,MAAM,CAACW,MAAM,GAAK,CAAC,GAAAH,QAAA,CAAAE,IAAA,UACrBE,KAAK,CAAC,4DAA4D,CAAC,CAAC,OAAAJ,QAAA,CAAAK,MAAA,uBAIlE,MAAO,CAAAd,IAAI,GAAK,QAAQ,GAAAS,QAAA,CAAAE,IAAA,UAC1BE,KAAK,CAAC,8CAA8C,CAAC,CAAC,OAAAJ,QAAA,CAAAK,MAAA,uBAIpDd,IAAI,EAAI,CAAC,GAAAS,QAAA,CAAAE,IAAA,UACXE,KAAK,CAAC,mDAAmD,CAAC,CAAC,OAAAJ,QAAA,CAAAK,MAAA,kBAAAL,QAAA,CAAAC,IAAA,GAKrDR,IAAI,CAAG,CACXa,OAAO,yBAAAC,MAAA,CAAuBhB,IAAI,CAAE,CACpCC,MAAM,CAAEA,MACV,CAAC,CAEKE,MAAM,CAAG,2BAA2B,CACpCC,QAAQ,CAAG,cAAc,CACzBC,GAAG,IAAAW,MAAA,CAAMb,MAAM,EAAAa,MAAA,CAAGZ,QAAQ,EAAAK,QAAA,CAAAE,IAAA,UAET,CAAAtD,KAAK,CAAC4D,IAAI,CAACZ,GAAG,CAAEH,IAAI,CAAC,SAAtCI,QAAQ,CAAAG,QAAA,CAAAS,IAAA,CAEdL,KAAK,CAACP,QAAQ,CAACa,IAAI,CAACJ,OAAO,CAAC,CAACN,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAW,EAAA,CAAAX,QAAA,aAE7BY,OAAO,CAACC,KAAK,CAAAb,QAAA,CAAAW,EAAM,CAAC,CAAC,yBAAAX,QAAA,CAAAc,IAAA,MAAAxB,OAAA,iBAExB,kBAhCK,CAAAL,SAASA,CAAA8B,EAAA,CAAAC,GAAA,SAAA9B,KAAA,CAAA+B,KAAA,MAAAC,SAAA,OAgCd,CAED5E,SAAS,CAAC,UAAM,CACd,GAAIiC,SAAS,EAAIC,aAAa,EAAIC,aAAa,CAAE,CAC/C,GAAM,CAAA0C,YAAY,CAChB5C,SAAS,CAAC4B,MAAM,CAAG3B,aAAa,CAAC2B,MAAM,CAAG1B,aAAa,CAAC0B,MAAM,CAChE9B,iBAAiB,CAAC8C,YAAY,CAAC,CACjC,CACF,CAAC,CAAE,CAAC5C,SAAS,CAAC,CAAC,CAEf,mBACEtB,KAAA,YAASmE,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACrCpE,KAAA,QAAKmE,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCpE,KAAA,QAAKmE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtE,IAAA,MAAAsE,QAAA,CAAG,gBAAc,CAAG,CAAC,cACrBpE,KAAA,QAAKmE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtE,IAAA,SAAAsE,QAAA,CAAM,IAAE,CAAM,CAAC,cACftE,IAAA,UACEuE,IAAI,CAAC,QAAQ,CACbtC,KAAK,CAAExB,KAAM,CACb+D,QAAQ,CAAE,SAAAA,SAAC1C,KAAK,QAAK,CAAAD,iBAAiB,CAACC,KAAK,CAAEpB,QAAQ,CAAC,EAAC,CACzD,CAAC,cACFV,IAAA,QACEqE,SAAS,CAAC,oBAAoB,CAC9BI,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAvC,SAAS,CAACzB,KAAK,CAAEgB,aAAa,CAAC,EAAC,CAAA6C,QAAA,cAE/CtE,IAAA,CAACJ,IAAI,EAAC8E,KAAK,CAAC,MAAM,CAACC,KAAK,CAAC,SAAS,CAAE,CAAC,CAClC,CAAC,EACH,CAAC,EACH,CAAC,cACNzE,KAAA,QAAKmE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtE,IAAA,MAAAsE,QAAA,CAAG,gBAAc,CAAG,CAAC,cACrBpE,KAAA,QAAKmE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtE,IAAA,SAAAsE,QAAA,CAAM,IAAE,CAAM,CAAC,cACftE,IAAA,UACEuE,IAAI,CAAC,QAAQ,CACbtC,KAAK,CAAEpB,KAAM,CACb2D,QAAQ,CAAE,SAAAA,SAAC1C,KAAK,QAAK,CAAAD,iBAAiB,CAACC,KAAK,CAAEhB,QAAQ,CAAC,EAAC,CACzD,CAAC,cACFd,IAAA,QACEqE,SAAS,CAAC,oBAAoB,CAC9BI,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAvC,SAAS,CAACrB,KAAK,CAAEa,aAAa,CAAC,EAAC,CAAA4C,QAAA,cAE/CtE,IAAA,CAACJ,IAAI,EAAC8E,KAAK,CAAC,MAAM,CAACC,KAAK,CAAC,SAAS,CAAE,CAAC,CAClC,CAAC,EACH,CAAC,EACH,CAAC,cACNzE,KAAA,QAAKmE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtE,IAAA,MAAAsE,QAAA,CAAG,sBAAoB,CAAG,CAAC,cAC3BtE,IAAA,QAAAsE,QAAA,cACEpE,KAAA,SAAAoE,QAAA,EAAOjD,cAAc,CAAC,SAAO,EAAM,CAAC,CACjC,CAAC,EACH,CAAC,cACNrB,IAAA,QAAKqE,SAAS,CAAC,aAAa,CAAAC,QAAA,cAC1BtE,IAAA,CAACN,YAAY,EAAC+E,OAAO,CAAE9C,WAAY,CAAA2C,QAAA,CAAC,gBAAc,CAAc,CAAC,CAC9D,CAAC,EACH,CAAC,CACLjE,MAAM,cACLH,KAAA,QAAKmE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BtE,IAAA,MAAAsE,QAAA,CAAG,4BAA0B,CAAG,CAAC,cACjCtE,IAAA,CAACF,MAAM,EAACmC,KAAK,CAAE5B,MAAO,CAACuE,IAAI,CAAE,GAAI,CAAE,CAAC,EACjC,CAAC,cAEN1E,KAAA,QAAKmE,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BtE,IAAA,CAACP,WAAW,EAACiF,KAAK,CAAC,OAAO,CAACC,KAAK,CAAC,SAAS,CAAE,CAAC,sBAE/C,EAAK,CACN,EACM,CAAC,CAEd,CAAC,CAED,cAAe,CAAAxE,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}